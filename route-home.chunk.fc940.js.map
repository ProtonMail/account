{"version":3,"sources":["webpack:///./routes/home/style.css?ca7d","webpack:///./components/auth/style.css?d54c","webpack:///./components/auth/formLogin.js","webpack:///./components/auth/formUnlock.js","webpack:///./components/auth/formSignU2F.js","webpack:///./components/auth/formLogin2FA.js","webpack:///./routes/home/index.js"],"names":["formLogin","login","model","username","password","e","preventDefault","value","target","formUnlock","unlock","passwordUnlock","sendSignRequest","props","auth","twoFactorResponse","success","U2FResponse","metaData","code","ERROR_CODE","TIMEOUT","abortLoginAction","loginU2FAction","componentDidMount","render","isSupported","id","className","getErrorMessage","connect","formLogin2FA","login2FA","twoFactorData","isTOTP","U2FRequest","U2F","style","twoFactorOption","password2FA","loginAction","login2FAAction","unlockAction","console","log","home","step"],"mappings":"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","file":"route-home.chunk.fc940.js","sourcesContent":["// removed by extract-text-webpack-plugin\nmodule.exports = {\"home\":\"home__MseGd\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./routes/home/style.css\n// module id = ZAL5\n// module chunks = 1","// removed by extract-text-webpack-plugin\nmodule.exports = {\"twoFactorOption\":\"twoFactorOption__FtDr0\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/auth/style.css\n// module id = fF25\n// module chunks = 1","import { h } from 'preact';\n\nconst formLogin = ({ login }) => {\n    const model = {\n        username: 'dew1527087668398',\n        password: 'test'\n    };\n\n    return (<form\n        name=\"formLogin\"\n        method=\"post\"\n        novalidate\n        onsubmit={( e ) => (e.preventDefault(), login(model))}>\n        <fieldset>\n            <div>\n                <label for=\"login\">Login</label>\n                <input\n                    type=\"text\"\n                    name=\"login\"\n                    autofocus\n                    autocapitalize=\"off\"\n                    autocorrect=\"off\"\n                    id=\"login\"\n                    required\n                    value={model.username}\n                    placeholder=\"Username\"\n                    oninput={({ target: { value } }) => {\n                        model.username = value;\n                    }}\n                />\n            </div>\n\n            <div>\n                <label for=\"password\">password</label>\n                <input\n                    type=\"password\"\n                    name=\"password\"\n                    id=\"password\"\n                    value={model.password}\n                    placeholder=\"Password\"\n                    oninput={({ target: { value } }) => {\n                        model.password = value;\n                    }}\n                />\n            </div>\n        </fieldset>\n\n        <button>Login</button>\n    </form>);\n};\n\nexport default formLogin;\n\n\n\n// WEBPACK FOOTER //\n// ./components/auth/formLogin.js","import { h } from 'preact';\n\nconst formUnlock = ({ unlock }) => {\n\n    const model = {};\n\n    return (<form\n        name=\"formLogin\"\n        method=\"post\"\n        novalidate\n        onsubmit={( e ) => (e.preventDefault(), unlock(model))}>\n        <fieldset>\n            <div>\n                <label for=\"passwordUnlock\">Unlock</label>\n                <input\n                  type=\"password\"\n                  autofocus\n                  autocapitalize=\"off\"\n                  autocorrect=\"off\"\n                  name=\"passwordUnlock\"\n                  required\n                  id=\"passwordUnlock\"\n                  oninput={({ target: { value }}) => {\n                    model.passwordUnlock = value;\n                  }} />\n            </div>\n        </fieldset>\n\n        <button>Send</button>\n    </form>);\n};\n\nexport default formUnlock;\n\n\n\n// WEBPACK FOOTER //\n// ./components/auth/formUnlock.js","import { h, Component } from 'preact';\nimport { connect } from 'unistore/full/preact';\nimport { isSupported } from 'u2f-api';\n\nimport authActions from './../../actions/authentication';\nimport { ERROR_CODE, getErrorMessage } from '../../helpers/u2f';\n\n/**\n * Form for the login 2FA action.\n */\nexport class FormSignU2F extends Component {\n    sendSignRequest () {\n        const { success, U2FResponse: { metaData: { code } = {} } = {} } = this.props.auth.twoFactorResponse;\n\n        if (!success && code) {\n\n            if (code === ERROR_CODE.TIMEOUT) {\n                // we need an updated auth/info\n                // the timeout is 1 minute on the client side, it's better\n                // to redo the whole process because the challenge expire after 2 minutes.\n                // funny thing, firefox uses the errorno OTHER_ERROR (1)\n                return this.props.abortLoginAction();\n            }\n        }\n\n        this.props.loginU2FAction();\n    }\n\n    componentDidMount () {\n        this.sendSignRequest();\n    }\n\n    render () {\n        if (!isSupported()) {\n            return <div><p>Your browser is not supported, please use another 2FA method instead</p></div>;\n        }\n\n        const { success, U2FResponse = {} } = this.props.auth.twoFactorResponse;\n\n        if (success && !U2FResponse.metaData) {\n            return <div><p>Success</p></div>;\n        }\n\n        const { metaData: { code } = {} } = U2FResponse;\n\n        return (<div id={this.props.id} className={this.props.className}>\n            <p>Activate your security key...</p>\n            {!success && !!code && <p>\n                <span>{getErrorMessage(code)}. </span>\n                <button onClick={() => this.sendSignRequest()} type='button'>Retry</button>\n            </p>}\n        </div>);\n    }\n}\n\nexport default connect('auth', authActions)(FormSignU2F);\n\n\n\n// WEBPACK FOOTER //\n// ./components/auth/formSignU2F.js","import { h } from 'preact';\n\nimport FormSignU2F from './formSignU2F';\n\nimport style from './style.css';\n\nconst formLogin2FA = ({ login2FA, twoFactorData: { isTOTP = true, U2F: U2FRequest } }) => {\n    const model = {};\n    return (<form onsubmit={e => (e.preventDefault(), login2FA(model))}>\n        <fieldset>\n            <legend> Choose one of the following 2FA methods</legend>\n            <div>\n                <label htmlFor=\"password2FA\">2FA code</label>\n                <div className={style.twoFactorOption}>\n                    <input\n                        type=\"text\"\n                        name=\"password2FA\"\n                        id=\"password2FA\"\n                        autocapitalize=\"off\"\n                        autocorrect=\"off\"\n                        autocomplete=\"off\"\n                        type=\"text\"\n                        minlength=\"6\"\n                        maxlength=\"8\"\n                        required\n                        oninput={({ target: { value } }) => {\n                            model.password2FA = value;\n                        }}/>\n                </div>\n            </div>\n            {U2FRequest && (<div>\n                <label htmlFor=\"u2fKey\">Security key</label>\n                <FormSignU2F id=\"u2fKey\" className={style.twoFactorOption}/>\n            </div>)}\n        </fieldset>\n\n        <button>Login</button>\n    </form>);\n};\n\nexport default formLogin2FA;\n\n\n\n// WEBPACK FOOTER //\n// ./components/auth/formLogin2FA.js","import { h, Component } from 'preact';\nimport { route } from 'preact-router';\nimport { connect } from 'unistore/full/preact';\n\nimport style from './style';\nimport authActions from '../../actions/authentication';\nimport FormLogin from '../../components/auth/formLogin';\nimport FormUnlock from '../../components/auth/formUnlock';\nimport FormLogin2FA from '../../components/auth/formLogin2FA';\n\nexport default connect(['auth'], authActions)(({ auth, loginAction, login2FAAction, unlockAction }) => {\n  console.log('LOGIN', auth);\n  return (\n    <div className={style.home}>\n      { auth.step === 'login' && <FormLogin login={loginAction} />}\n      { auth.step === 'unlock' && <FormUnlock unlock={unlockAction} />}\n        {auth.step === '2fa' && <FormLogin2FA login2FA={login2FAAction} twoFactorData={auth.twoFactorData}/>}\n    </div>\n  );\n})\n\n\n\n// WEBPACK FOOTER //\n// ./routes/home/index.js"],"sourceRoot":""}